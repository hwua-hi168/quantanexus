# 镜像配置
image:
  repository: "{{ juicefs_s3_image_repository | default('juicedata/juicefs-s3-gateway') }}"
  {% if juicefs_s3_image_tag %}
  tag: "{{ juicefs_s3_image_tag }}"
  {% endif %}
  {% if juicefs_s3_image_registry %}
  registry: "{{ juicefs_s3_image_registry }}"
  {% endif %}

# Redis 连接（Secret 会自动创建）
secret:
  name: "{{ juicefs_s3_secret_name }}"
  metaurl: "{{ juicefs_s3_metaurl }}"
  storage: "{{ juicefs_s3_storage }}"
  accessKey: "{{ juicefs_s3_access_key }}" 
  secretKey: "{{ juicefs_s3_secret_key }}"
  bucket: "{{ juicefs_s3_bucket }}"

# 环境变量
#envs:
#  - name: MINIO_ROOT_USER
#    value: "{{ juicefs_s3_env_root_user }}"
#  - name: MINIO_ROOT_PASSWORD
#    value: "{{ juicefs_s3_env_root_password }}"

# 服务暴露
service:
  type: {{ juicefs_s3_service_type }}
  {% if juicefs_s3_service_type == 'NodePort' and juicefs_s3_node_port is defined %}
  nodePort: {{ juicefs_s3_node_port }}
  {% endif %}

# Ingress（默认关闭）
ingress:
  enabled: {{ juicefs_s3_ingress_enabled | lower }}
  className: "{{ juicefs_s3_ingress_class }}"
  annotations: {}
  hosts:
    - host: ""
      paths:
        - path: /
          pathType: ImplementationSpecific
  tls: []

# 资源
resources:
  requests:
    cpu: {{ juicefs_s3_cpu_req }}
    memory: {{ juicefs_s3_mem_req }}
  limits:
    cpu: {{ juicefs_s3_cpu_lim }}
    memory: {{ juicefs_s3_mem_lim }}

## 健康检查
#readinessProbe:
#  initialDelaySeconds: 30
#  periodSeconds: 10
#livenessProbe:
#  initialDelaySeconds: 30
#  periodSeconds: 30